/* ===== base theme ===== */
ion-content.gradient-dark {
    --background: linear-gradient(135deg, #0f0c29, #302b63, #24243e) !important;
    color: #fff !important;
}

/* ===== title bar (replaces toolbar) ===== */
.page-title {
    position: sticky;
    top: 0;
    z-index: 50;
    display: grid;
    place-items: center;
    padding: clamp(10px, 2.8vw, 16px);
    margin: -12px -16px 6px;
    /* make it edge-to-edge over ion-padding */

    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);

}

.page-title h1 {
    margin: 0;
    text-align: center;
    font-weight: 800;
    font-size: clamp(18px, 2.2vw, 28px);
    letter-spacing: .4px;
    color: #fff;
}

.page-title::after {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    bottom: -1px;
    height: 10px;
    background: radial-gradient(50% 8px at 50% 0%, rgba(168, 85, 247, .35), transparent);
    pointer-events: none;
}

/* ===== layout ===== */
.hero {
    display: grid;
    place-items: center;
    padding: clamp(18px, 4vw, 28px) 0 6px;
}

.panel {
    margin: 14px auto;

    border-radius: 16px;
    // background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.03));
    // border: 1px solid rgba(255, 255, 255, 0.12);
    //box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

/* buttons */
.controls {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    padding: 16px 18px 8px;
    justify-content: center;
    /* center align */
}

ion-button {
    --border-radius: 12px;
    --padding-start: 18px;
    --padding-end: 18px;
    --box-shadow: 0 6px 16px rgba(0, 0, 0, .25);
}

/* mobile: stack buttons full width */
@media (max-width: 520px) {
    .controls ion-button {
        width: 100%;
    }
}

/* status row */
.status-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 12px;
    padding: 6px 16px 16px;
    color: #d8d9ff;
    font-size: 14px;
}

.status-row .dot {
    font-size: 18px;
    color: #e11d48;
}

.status-row .dot.on {
    color: #22c55e;
}

.status-row .agent {
    opacity: .9;
}

.status-row .status {
    aria-live: polite;
}

/* a11y hint */

/* ===== crystal (polished) ===== */
.ai-crystal {
    --size: clamp(140px, 22vw, 200px);
    position: relative;
    width: var(--size);
    height: var(--size);
    border-radius: 50%;
    display: grid;
    place-items: center;
    isolation: isolate;
    margin-bottom: 6px;
}

.ai-crystal::after {
    content: "";
    position: absolute;
    inset: -22px;
    border-radius: 50%;
    background: radial-gradient(closest-side, rgba(168, 85, 247, .25), transparent 70%);
    filter: blur(10px);
    opacity: .7;
    transition: opacity .25s, transform .25s;
    transform: scale(1);
    z-index: 0;
}

.ai-crystal .ring {
    position: absolute;
    inset: -7px;
    border-radius: 50%;
    background: conic-gradient(from 0deg, #a855f7, #7c3aed, #6366f1, #22d3ee, #a855f7);
    filter: blur(.5px);
    animation: ring-spin 8s linear infinite;
    z-index: 1;
    box-shadow: 0 0 18px rgba(168, 85, 247, .38), inset 0 0 12px rgba(124, 58, 237, .32);
}

.ai-crystal .blob {
    position: relative;
    width: calc(var(--size) - 26px);
    height: calc(var(--size) - 26px);
    border-radius: 42% 58% 40% 60% / 46% 40% 60% 54%;
    background:
        radial-gradient(120px 80px at 30% 25%, rgba(255, 255, 255, .22), transparent 60%),
        linear-gradient(135deg, #7c3aed 0%, #6366f1 50%, #22d3ee 100%);
    box-shadow: inset 0 0 35px rgba(255, 255, 255, .12), 0 10px 28px rgba(0, 0, 0, .35);
    filter: saturate(1.1) brightness(1.02);
    animation: blob-morph 6.5s ease-in-out infinite, blob-drift 14s linear infinite, hue 10s linear infinite;
    z-index: 2;
}

.ai-crystal.listening .ring {
    animation-duration: 5.5s;
}

.ai-crystal.listening .blob {
    filter: saturate(1.2) brightness(1.08);
    animation-duration: 5.2s, 11s, 8s;
}

.ai-crystal.speaking::after {
    opacity: 1;
    transform: scale(1.08);
    animation: speak-glow 1s ease-in-out infinite;
}

.ai-crystal.speaking .ring {
    animation-duration: 4.5s;
}

.ai-crystal.speaking .blob {
    filter: saturate(1.35) brightness(1.2);
    animation-duration: 4.6s, 9s, 6s;
}

.ai-label {
    text-align: center;
    color: #ece9ff;
    font-weight: 700;
    letter-spacing: .3px;
    text-shadow: 0 1px 10px rgba(153, 102, 255, .35);
}

/* keyframes */
@keyframes ring-spin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes blob-morph {
    0% {
        border-radius: 42% 58% 40% 60% / 46% 40% 60% 54%
    }

    25% {
        border-radius: 60% 40% 58% 42% / 38% 62% 38% 62%
    }

    50% {
        border-radius: 48% 52% 62% 38% / 58% 36% 64% 42%
    }

    75% {
        border-radius: 62% 38% 44% 56% / 40% 60% 40% 60%
    }

    100% {
        border-radius: 42% 58% 40% 60% / 46% 40% 60% 54%
    }
}

@keyframes blob-drift {
    0% {
        transform: rotate(0)
    }

    50% {
        transform: rotate(180deg)
    }

    100% {
        transform: rotate(360deg)
    }
}

@keyframes hue {
    to {
        filter: hue-rotate(360deg);
    }
}

@keyframes speak-glow {

    0%,
    100% {
        box-shadow: 0 0 24px rgba(168, 85, 247, .45), 0 0 60px rgba(99, 102, 241, .30)
    }

    50% {
        box-shadow: 0 0 42px rgba(168, 85, 247, .75), 0 0 90px rgba(34, 211, 238, .45)
    }
}

/* reduce motion */
@media (prefers-reduced-motion: reduce) {

    .ai-crystal .ring,
    .ai-crystal .blob {
        animation: none !important;
    }
}

.btn-wide {
    min-width: 160px;
}

.btn-spinner {
    margin-right: 8px;
    transform: translateY(2px);
}

.btn-label {
    font-weight: 600;
    letter-spacing: 0.4px;
}

/* Message area styles */
.ui-msg {
    margin: 16px auto 0;
    padding: 12px 14px;
    border-radius: 10px;
    display: grid;
    grid-template-columns: 24px 1fr auto;
    gap: 10px;
    align-items: center;
    max-width: 560px;
    background: #1f2937;
    /* default dark neutral */
    color: #fff;
    box-shadow: 0 8px 20px rgba(0, 0, 0, .22);
}

.ui-msg.success {
    background: #065f46;
}

/* emerald-800 */
.ui-msg.error {
    background: #7f1d1d;
}

/* red-900  */
.msg-icon {
    font-size: 20px;
}

.msg-text {
    font-weight: 500;
}

.msg-close {
    color: #fff;
    text-transform: none;
}